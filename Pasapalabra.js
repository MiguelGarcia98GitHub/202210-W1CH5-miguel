const gameQuestions1 = [
    {
        letter: "a",
        answer: "abducir",
        question:
            "CON LA A. Dicho de una supuesta criatura extraterrestre: Apoderarse de alguien",
    },
    {
        letter: "b",
        answer: "bingo",
        question:
            "CON LA B. Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso",
    },
    {
        letter: "c",
        answer: "churumbel",
        question: "CON LA C. Niño, crío, bebé",
    },
    {
        letter: "d",
        answer: "diarrea",
        question:
            "CON LA D. Anormalidad en la función del aparato digestivo caracterizada por frecuentes evacuaciones y su consistencia líquida",
    },
    {
        letter: "e",
        answer: "ectoplasma",
        question:
            "CON LA E. Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación",
    },
    {
        letter: "f",
        answer: "facil",
        question:
            "CON LA F. Que no requiere gran esfuerzo, capacidad o dificultad",
    },
    {
        letter: "g",
        answer: "galaxia",
        question:
            "CON LA G. Conjunto enorme de estrellas, polvo interestelar, gases y partículas",
    },
    {
        letter: "h",
        answer: "harakiri",
        question: "CON LA H. Suicidio ritual japonés por desentrañamiento",
    },
    {
        letter: "i",
        answer: "iglesia",
        question: "CON LA I. Templo cristiano",
    },
    {
        letter: "j",
        answer: "jabali",
        question:
            "CON LA J. Variedad salvaje del cerdo que sale en la película 'El Rey León', de nombre Pumba",
    },
    {
        letter: "k",
        answer: "kamikaze",
        question:
            "CON LA K. Persona que se juega la vida realizando una acción temeraria",
    },
    {
        letter: "l",
        answer: "licantropo",
        question: "CON LA L. Hombre lobo",
    },
    {
        letter: "m",
        answer: "misantropo",
        question:
            "CON LA M. Persona que huye del trato con otras personas o siente gran aversión hacia ellas",
    },
    {
        letter: "n",
        answer: "necedad",
        question: "CON LA N. Demostración de poca inteligencia",
    },
    {
        letter: "ñ",
        answer: "señal",
        question:
            "CONTIENE LA Ñ. Indicio que permite deducir algo de lo que no se tiene un conocimiento directo.",
    },
    {
        letter: "o",
        answer: "orco",
        question:
            "CON LA O. Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien",
    },
    {
        letter: "p",
        answer: "protoss",
        question:
            "CON LA P. Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft",
    },
    {
        letter: "q",
        answer: "queso",
        question:
            "CON LA Q. Producto obtenido por la maduración de la cuajada de la leche",
    },
    {
        letter: "r",
        answer: "raton",
        question: "CON LA R. Roedor",
    },
    {
        letter: "s",
        answer: "stackoverflow",
        question:
            "CON LA S. Comunidad salvadora de todo desarrollador informático",
    },
    {
        letter: "t",
        answer: "terminator",
        question:
            "CON LA T. Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984",
    },
    {
        letter: "u",
        answer: "unamuno",
        question:
            "CON LA U. Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914",
    },
    {
        letter: "v",
        answer: "vikingos",
        question:
            "CON LA V. Nombre dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa",
    },
    {
        letter: "w",
        answer: "sandwich",
        question:
            "CONTIENE LA W. Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso",
    },
    {
        letter: "x",
        answer: "botox",
        question:
            "CONTIENE LA X. Toxina bacteriana utilizada en cirujía estética",
    },
    {
        letter: "y",
        answer: "peyote",
        question:
            "CONTIENE LA Y. Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal por indígenas americanos",
    },
    {
        letter: "z",
        answer: "zen",
        question:
            "CON LA Z. Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional",
    },
];

const gameQuestions2 = [
    {
        letter: "a",
        answer: "agilidad",
        question: "CON LA A. Cualidad de ágil",
    },
    {
        letter: "b",
        answer: "bingo",
        question:
            "CON LA B. Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso",
    },
    {
        letter: "c",
        answer: "churumbel",
        question: "CON LA C. Niño, crío, bebé",
    },
    {
        letter: "d",
        answer: "diarrea",
        question:
            "CON LA D. Anormalidad en la función del aparato digestivo caracterizada por frecuentes evacuaciones y su consistencia líquida",
    },
    {
        letter: "e",
        answer: "ectoplasma",
        question:
            "CON LA E. Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación",
    },
    {
        letter: "f",
        answer: "facil",
        question:
            "CON LA F. Que no requiere gran esfuerzo, capacidad o dificultad",
    },
    {
        letter: "g",
        answer: "galaxia",
        question:
            "CON LA G. Conjunto enorme de estrellas, polvo interestelar, gases y partículas",
    },
    {
        letter: "h",
        answer: "harakiri",
        question: "CON LA H. Suicidio ritual japonés por desentrañamiento",
    },
    {
        letter: "i",
        answer: "iglesia",
        question: "CON LA I. Templo cristiano",
    },
    {
        letter: "j",
        answer: "jabali",
        question:
            "CON LA J. Variedad salvaje del cerdo que sale en la película 'El Rey León', de nombre Pumba",
    },
    {
        letter: "k",
        answer: "kamikaze",
        question:
            "CON LA K. Persona que se juega la vida realizando una acción temeraria",
    },
    {
        letter: "l",
        answer: "licantropo",
        question: "CON LA L. Hombre lobo",
    },
    {
        letter: "m",
        answer: "misantropo",
        question:
            "CON LA M. Persona que huye del trato con otras personas o siente gran aversión hacia ellas",
    },
    {
        letter: "n",
        answer: "necedad",
        question: "CON LA N. Demostración de poca inteligencia",
    },
    {
        letter: "ñ",
        answer: "señal",
        question:
            "CONTIENE LA Ñ. Indicio que permite deducir algo de lo que no se tiene un conocimiento directo.",
    },
    {
        letter: "o",
        answer: "orco",
        question:
            "CON LA O. Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien",
    },
    {
        letter: "p",
        answer: "protoss",
        question:
            "CON LA P. Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft",
    },
    {
        letter: "q",
        answer: "queso",
        question:
            "CON LA Q. Producto obtenido por la maduración de la cuajada de la leche",
    },
    {
        letter: "r",
        answer: "raton",
        question: "CON LA R. Roedor",
    },
    {
        letter: "s",
        answer: "stackoverflow",
        question:
            "CON LA S. Comunidad salvadora de todo desarrollador informático",
    },
    {
        letter: "t",
        answer: "terminator",
        question:
            "CON LA T. Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984",
    },
    {
        letter: "u",
        answer: "unamuno",
        question:
            "CON LA U. Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914",
    },
    {
        letter: "v",
        answer: "vikingos",
        question:
            "CON LA V. Nombre dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa",
    },
    {
        letter: "w",
        answer: "sandwich",
        question:
            "CONTIENE LA W. Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso",
    },
    {
        letter: "x",
        answer: "botox",
        question:
            "CONTIENE LA X. Toxina bacteriana utilizada en cirujía estética",
    },
    {
        letter: "y",
        answer: "peyote",
        question:
            "CONTIENE LA Y. Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal por indígenas americanos",
    },
    {
        letter: "z",
        answer: "zen",
        question:
            "CON LA Z. Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional",
    },
];

const gameQuestions3 = [
    {
        letter: "a",
        answer: "arbol",
        question:
            "CON LA A. Planta de tallo leñoso que se ramifica a cierta altura del suelo",
    },
    {
        letter: "b",
        answer: "bingo",
        question:
            "CON LA B. Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso",
    },
    {
        letter: "c",
        answer: "churumbel",
        question: "CON LA C. Niño, crío, bebé",
    },
    {
        letter: "d",
        answer: "diarrea",
        question:
            "CON LA D. Anormalidad en la función del aparato digestivo caracterizada por frecuentes evacuaciones y su consistencia líquida",
    },
    {
        letter: "e",
        answer: "ectoplasma",
        question:
            "CON LA E. Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación",
    },
    {
        letter: "f",
        answer: "facil",
        question:
            "CON LA F. Que no requiere gran esfuerzo, capacidad o dificultad",
    },
    {
        letter: "g",
        answer: "galaxia",
        question:
            "CON LA G. Conjunto enorme de estrellas, polvo interestelar, gases y partículas",
    },
    {
        letter: "h",
        answer: "harakiri",
        question: "CON LA H. Suicidio ritual japonés por desentrañamiento",
    },
    {
        letter: "i",
        answer: "iglesia",
        question: "CON LA I. Templo cristiano",
    },
    {
        letter: "j",
        answer: "jabali",
        question:
            "CON LA J. Variedad salvaje del cerdo que sale en la película 'El Rey León', de nombre Pumba",
    },
    {
        letter: "k",
        answer: "kamikaze",
        question:
            "CON LA K. Persona que se juega la vida realizando una acción temeraria",
    },
    {
        letter: "l",
        answer: "licantropo",
        question: "CON LA L. Hombre lobo",
    },
    {
        letter: "m",
        answer: "misantropo",
        question:
            "CON LA M. Persona que huye del trato con otras personas o siente gran aversión hacia ellas",
    },
    {
        letter: "n",
        answer: "necedad",
        question: "CON LA N. Demostración de poca inteligencia",
    },
    {
        letter: "ñ",
        answer: "señal",
        question:
            "CONTIENE LA Ñ. Indicio que permite deducir algo de lo que no se tiene un conocimiento directo.",
    },
    {
        letter: "o",
        answer: "orco",
        question:
            "CON LA O. Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien",
    },
    {
        letter: "p",
        answer: "protoss",
        question:
            "CON LA P. Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft",
    },
    {
        letter: "q",
        answer: "queso",
        question:
            "CON LA Q. Producto obtenido por la maduración de la cuajada de la leche",
    },
    {
        letter: "r",
        answer: "raton",
        question: "CON LA R. Roedor",
    },
    {
        letter: "s",
        answer: "stackoverflow",
        question:
            "CON LA S. Comunidad salvadora de todo desarrollador informático",
    },
    {
        letter: "t",
        answer: "terminator",
        question:
            "CON LA T. Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984",
    },
    {
        letter: "u",
        answer: "unamuno",
        question:
            "CON LA U. Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914",
    },
    {
        letter: "v",
        answer: "vikingos",
        question:
            "CON LA V. Nombre dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa",
    },
    {
        letter: "w",
        answer: "sandwich",
        question:
            "CONTIENE LA W. Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso",
    },
    {
        letter: "x",
        answer: "botox",
        question:
            "CONTIENE LA X. Toxina bacteriana utilizada en cirujía estética",
    },
    {
        letter: "y",
        answer: "peyote",
        question:
            "CONTIENE LA Y. Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal por indígenas americanos",
    },
    {
        letter: "z",
        answer: "zen",
        question:
            "CON LA Z. Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional",
    },
];

const secondsPerGame = 130;
const ranking = {
    Miguel: 3,
    Manolo: 2,
    Garfunkel: 1,
};

const startGame = () => {
    let gameQuestions = [];

    const chooseRandomQuestions = () => {
        const randomNum = Math.floor(Math.random() * 3);

        if (randomNum === 0) {
            gameQuestions = gameQuestions1;
        }

        if (randomNum === 1) {
            gameQuestions = gameQuestions2;
        }

        if (randomNum === 2) {
            gameQuestions = gameQuestions3;
        }
    };

    chooseRandomQuestions();

    const player = prompt("Whats your name?");

    if (ranking[player] !== undefined) {
        console.log(`Welcome back, ${player}`);
    } else {
        console.log(
            `Its your first time playing, welcome to the game, ${player}!`
        );
    }

    playGame(player, gameQuestions);
};

const playGame = (player, gameQuestions) => {
    const startTime = new Date().getTime();
    let currentPoints = 0;

    for (let i = 0; i < gameQuestions.length; i++) {
        let roundPoints = (currentPoints += playRound(
            currentPoints,
            gameQuestions[i],
            startTime,
            i,
            player,
            gameQuestions
        ));
        console.log(roundPoints);
    }

    endGame(player, currentPoints);
};

const playRound = (points, question, startTime, i, player, gameQuestions) => {
    const timeLeft = startTime + secondsPerGame * 1000 - new Date().getTime();
    let newPoints = 0;
    let answer = prompt(question.question);

    if (timeLeft > 0) {
        if (answer) {
            answer = answer.toLowerCase();
        }

        if (answer === "pasapalabra") {
            console.log(
                `Passing! Lets move on to the next word ${Math.round(
                    timeLeft / 1000
                )} seconds remaining.`
            );
            newPoints = -1;
        } else if (answer === question.answer) {
            newPoints = 1;
            console.log(
                `Correct! Good job! So far you have ${
                    points + newPoints
                } points in the game! ${Math.round(
                    timeLeft / 1000
                )} seconds remaining`
            );
        } else {
            console.log(
                `Incorrect! ${Math.round(timeLeft / 1000)} seconds remaining`
            );
        }

        if (newPoints < 0) {
            gameQuestions.push(gameQuestions[i]);
            newPoints = 0;
        } else {
            points += newPoints;
        }
    } else {
        console.log("Time is up! Skipping questions");

        endGame(player, points);
    }

    return newPoints;
};

const endGame = (player, points) => {
    if (ranking[player] !== undefined) {
        if (points > ranking[player]) {
            ranking[player] = points;
        }
    } else {
        ranking[player] = points;
    }

    const orderedRanking = Object.fromEntries(
        Object.entries(ranking).sort(([, a], [, b]) => b - a)
    );
    const keys = Object.keys(orderedRanking);
    const values = Object.values(orderedRanking);

    let displayRanking = "The ranking is currently:";
    for (let i = 0; i < keys.length; i++) {
        displayRanking += `\n• ${i + 1}. ${keys[i]} with ${values[i]} points`;
    }
    console.log(displayRanking);
};

startGame();
